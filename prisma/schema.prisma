generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "rhel-openssl-1.0.x", "rhel-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Subscriber {
  id        Int       @id @default(autoincrement())
  email     String    @unique
  createdAt DateTime? @default(now()) @db.Timestamptz(6)
}

model PaperSubmission {
  id             Int       @id @default(autoincrement())
  authorName     String
  coAttributes   String?
  country        String
  email          String
  whatsappNumber String
  organization   String
  fileUrl        String
  status         String    @default("PENDING")
  createdAt      DateTime? @default(now()) @db.Timestamptz(6)
}

model Attendee {
  id                Int       @id @default(autoincrement())
  firstName         String
  lastName          String
  email             String
  org               String?
  role              String?
  dietary           String?
  ticketType        String    // EARLY_BIRD, REGULAR, STUDENT, E_ORAL, E_POSTER, LISTENER
  attendanceMode    String    @default("IN_PERSON") // IN_PERSON, VIRTUAL, HYBRID
  couponCode        String?
  discountApplied   Float?    @default(0)
  hasPaid           Boolean   @default(false)
  paymentStatus     String    @default("PENDING") // PENDING, COMPLETED, ABANDONED
  paymentFeedback   String?
  razorpayOrderId   String?   @unique
  razorpayPaymentId String?   @unique
  createdAt         DateTime? @default(now()) @db.Timestamptz(6)
}

model Speaker {
  id           Int     @id @default(autoincrement())
  name         String
  role         String?
  affiliation  String?
  bio          String?
  photoUrl     String?
  topic        String?
  type         String  @default("KEYNOTE")
  displayOrder Int     @default(0)
  linkedin     String?
  twitter      String?
  website      String?
  expertise    Json?
  isFeatured   Boolean @default(false)
  sessionCount Int     @default(0)
}

model SpeakerApplication {
  id                  Int      @id @default(autoincrement())
  fullName            String
  email               String
  phone               String?
  linkedinUrl         String?
  websiteUrl          String?
  profilePhotoUrl     String?
  currentPosition     String
  organization        String
  yearsExperience     Int
  expertise           Json?
  sessionTitle        String
  sessionType         String
  sessionDescription  String
  audienceLevel       String?
  durationPreference  Int?
  hasSpeakingExperience Boolean?
  pastEngagements     String?
  videoLinks          String?
  motivation          String?
  specialRequirements String?
  status              String   @default("PENDING")
  createdAt           DateTime @default(now()) @db.Timestamptz(6)
  updatedAt           DateTime @updatedAt @db.Timestamptz(6)
}

model CommitteeMember {
  id           Int     @id @default(autoincrement())
  name         String
  role         String
  photoUrl     String?
  displayOrder Int     @default(0)
}

model ResourceLead {
  id        Int       @id @default(autoincrement())
  name      String
  email     String
  phone     String
  resource  String
  createdAt DateTime? @default(now()) @db.Timestamptz(6)
}

model ConferenceInquiry {
  id             Int       @id @default(autoincrement())
  fullName       String
  email          String
  whatsappNumber String
  country        String
  createdAt      DateTime? @default(now()) @db.Timestamptz(6)
}

model Resource {
  id        Int      @id @default(autoincrement())
  title     String
  fileUrl   String
  category  String
  isVisible Boolean  @default(true)
  createdAt DateTime @default(now()) @db.Timestamptz(6)
}
model ContactMessage {
  id        Int      @id @default(autoincrement())
  name      String
  email     String
  subject   String
  message   String
  createdAt DateTime @default(now()) @db.Timestamptz(6)
}

model ExitFeedback {
  id               Int      @id @default(autoincrement())
  email            String?
  ticketType       String?
  abandonReason    String   // PRICE_HIGH, NOT_READY, NEED_APPROVAL, TECHNICAL_ISSUE, OTHER
  additionalNotes  String?
  wasOfferedCoupon Boolean  @default(false)
  acceptedCoupon   Boolean  @default(false)
  createdAt        DateTime @default(now()) @db.Timestamptz(6)
}

model Coupon {
  id            Int      @id @default(autoincrement())
  code          String   @unique
  discountType  String   // PERCENTAGE, FIXED
  discountValue Float
  maxUses       Int      @default(1)
  usedCount     Int      @default(0)
  validFrom     DateTime @default(now()) @db.Timestamptz(6)
  validUntil    DateTime
  isActive      Boolean  @default(true)
  createdAt     DateTime @default(now()) @db.Timestamptz(6)
}

model Sponsor {
  id           Int      @id @default(autoincrement())
  name         String
  logoUrl      String?
  website      String?
  tier         String   @default("SILVER") // PLATINUM, GOLD, SILVER
  displayOrder Int      @default(0)
  createdAt    DateTime @default(now()) @db.Timestamptz(6)
}

model Award {
  id           Int      @id @default(autoincrement())
  title        String
  category     String
  description  String?
  displayOrder Int      @default(0)
  createdAt    DateTime @default(now()) @db.Timestamptz(6)
}

model AwardNomination {
  id           Int      @id @default(autoincrement())
  category     String
  nomineeName  String
  affiliation  String
  justification String?
  createdAt    DateTime @default(now()) @db.Timestamptz(6)
}
