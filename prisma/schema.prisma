generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "rhel-openssl-1.0.x", "rhel-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Subscriber {
  id        Int       @id @default(autoincrement())
  email     String    @unique
  createdAt DateTime? @default(now()) @db.Timestamptz(6)
}

model PaperSubmission {
  id             Int           @id @default(autoincrement())
  authorName     String
  coAttributes   String?
  country        String
  email          String
  whatsappNumber String
  organization   String
  fileUrl        String
  status         String        @default("PENDING")
  createdAt      DateTime?     @default(now()) @db.Timestamptz(6)
  title          String?
  track          String?
  reviews        PaperReview[]
}

model PaperReview {
  id           Int             @id @default(autoincrement())
  paperId      Int
  reviewerName String
  score        Int
  comments     String?
  createdAt    DateTime        @default(now()) @db.Timestamptz(6)
  paper        PaperSubmission @relation(fields: [paperId], references: [id], onDelete: Cascade)
}

model Attendee {
  id                Int       @id @default(autoincrement())
  firstName         String
  lastName          String
  email             String
  org               String?
  role              String?
  dietary           String?
  ticketType        String
  attendanceMode    String    @default("IN_PERSON")
  couponCode        String?
  discountApplied   Float?    @default(0)
  hasPaid           Boolean   @default(false)
  paymentStatus     String    @default("PENDING")
  paymentFeedback   String?
  razorpayOrderId   String?   @unique
  razorpayPaymentId String?   @unique
  createdAt         DateTime? @default(now()) @db.Timestamptz(6)
}

model Speaker {
  id           Int     @id @default(autoincrement())
  name         String
  role         String?
  affiliation  String?
  bio          String?
  photoUrl     String?
  topic        String?
  type         String  @default("KEYNOTE")
  displayOrder Int     @default(0)
  expertise    Json?
  isFeatured   Boolean @default(false)
  linkedin     String?
  sessionCount Int     @default(0)
  twitter      String?
  website      String?
}

model SpeakerApplication {
  id                    Int      @id @default(autoincrement())
  fullName              String
  email                 String
  phone                 String?
  linkedinUrl           String?
  websiteUrl            String?
  profilePhotoUrl       String?
  currentPosition       String
  organization          String
  yearsExperience       Int
  expertise             Json?
  sessionTitle          String
  sessionType           String
  sessionDescription    String
  audienceLevel         String?
  durationPreference    Int?
  hasSpeakingExperience Boolean?
  pastEngagements       String?
  videoLinks            String?
  motivation            String?
  specialRequirements   String?
  status                String   @default("PENDING")
  createdAt             DateTime @default(now()) @db.Timestamptz(6)
  updatedAt             DateTime @updatedAt @db.Timestamptz(6)
  bio                   String?
  whatsappNumber        String?
}

model CommitteeMember {
  id           Int     @id @default(autoincrement())
  name         String
  role         String
  photoUrl     String?
  displayOrder Int     @default(0)
}

model ResourceLead {
  id        Int       @id @default(autoincrement())
  name      String
  email     String
  phone     String
  resource  String
  createdAt DateTime? @default(now()) @db.Timestamptz(6)
}

model ConferenceInquiry {
  id             Int       @id @default(autoincrement())
  fullName       String
  email          String
  whatsappNumber String
  country        String
  createdAt      DateTime? @default(now()) @db.Timestamptz(6)
}

model Resource {
  id        Int      @id @default(autoincrement())
  title     String
  fileUrl   String
  category  String
  isVisible Boolean  @default(true)
  createdAt DateTime @default(now()) @db.Timestamptz(6)
}

model ContactMessage {
  id        Int      @id @default(autoincrement())
  name      String
  email     String
  subject   String
  message   String
  createdAt DateTime @default(now()) @db.Timestamptz(6)
}

model ExitFeedback {
  id               Int      @id @default(autoincrement())
  email            String?
  ticketType       String?
  abandonReason    String
  additionalNotes  String?
  wasOfferedCoupon Boolean  @default(false)
  acceptedCoupon   Boolean  @default(false)
  createdAt        DateTime @default(now()) @db.Timestamptz(6)
}

model Coupon {
  id            Int      @id @default(autoincrement())
  code          String   @unique
  discountType  String
  discountValue Float
  maxUses       Int      @default(1)
  usedCount     Int      @default(0)
  validFrom     DateTime @default(now()) @db.Timestamptz(6)
  validUntil    DateTime
  isActive      Boolean  @default(true)
  createdAt     DateTime @default(now()) @db.Timestamptz(6)
}

model Sponsor {
  id           Int      @id @default(autoincrement())
  name         String
  logoUrl      String?
  website      String?
  tier         String   @default("SILVER")
  displayOrder Int      @default(0)
  createdAt    DateTime @default(now()) @db.Timestamptz(6)
}

model Award {
  id           Int      @id @default(autoincrement())
  title        String
  category     String
  description  String?
  displayOrder Int      @default(0)
  createdAt    DateTime @default(now()) @db.Timestamptz(6)
}

model AwardNomination {
  id            Int      @id @default(autoincrement())
  category      String
  nomineeName   String
  affiliation   String
  justification String?
  createdAt     DateTime @default(now()) @db.Timestamptz(6)
}

model AdminUser {
  id        String    @id @default(cuid())
  email     String    @unique
  name      String?
  role      AdminRole @default(ADMIN)
  authId    String    @unique
  createdAt DateTime  @default(now()) @db.Timestamptz(6)
  updatedAt DateTime  @updatedAt @db.Timestamptz(6)
}

model ImportantDate {
  id        Int      @id @default(autoincrement())
  event     String
  date      String
  note      String?
  isActive  Boolean  @default(true)
  order     Int      @default(0)
  createdAt DateTime @default(now()) @db.Timestamptz(6)
}

model Testimonial {
  id          Int      @id @default(autoincrement())
  name        String
  designation String?
  message     String
  photoUrl    String?
  rating      Int      @default(5)
  isActive    Boolean  @default(true)
  order       Int      @default(0)
  createdAt   DateTime @default(now()) @db.Timestamptz(6)
}

model TicketPrice {
  id        Int      @id @default(autoincrement())
  type      String   @unique
  label     String
  price     Float
  currency  String   @default("USD")
  updatedAt DateTime @updatedAt @db.Timestamptz(6)
}

enum AdminRole {
  SUPER_ADMIN
  ADMIN
  MODERATOR
  VIEWER
}
